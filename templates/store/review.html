<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>로컬픽</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<style>
    .review_top_box{
        margin-top: 60px;
        margin-bottom: 30px;
    }
    .review_top{
        text-align: center;
        margin-top: 50px;
    }
    #back{
        float: left;
        border: none;
        background-color: white;
    }
    #back > i {
        margin-left: 13px;
    }
    input[type=range] {
            -webkit-appearance: none;
            margin: 10px 0 10px 10px;
            width: 230px;
        }

        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            cursor: pointer;
            background: #BDBDBD;
            border-radius: 10px;
        }
        input[type=range]::-webkit-slider-thumb {
            height: 15px;
            width: 15px;
            border-radius: 22px;
            background: #33C7F7;
            cursor: pointer;
            -webkit-appearance: none;
            margin-top: -6px;
        }
        input[type=range]:focus::-webkit-slider-runnable-track {
            background: #33C7F7;
        }
        input[type=range]::-moz-range-track {
            width: 100%;
            height: 10px;
            cursor: pointer;
            background: #33C7F7;
            border-radius: 10px;

        }
        input[type=range]::-moz-range-thumb {
            height: 15px;
            width: 15px;
            border-radius: 15px;
            background: #33C7F7;
            cursor: pointer;
        }
        input[type=range]::-ms-track {
            width: 100%;
            height: 10px;
            cursor: pointer;
            background: transparent;
            border-color: transparent;
            color: transparent;
        }
        input[type=range]::-ms-fill-lower {
            background: #33C7F7;
            border-radius: 20px;

        }
        input[type=range]::-ms-fill-upper {
            background: #33C7F7;
            border-radius: 20px;
        }
        input[type=range]::-ms-thumb {
            margin-top: 1px;
            height: 15px;
            width: 15px;
            border-radius: 15px;
            background: #33C7F7;
            cursor: pointer;
        }
        input[type=range]:focus::-ms-fill-lower {
            background: #33C7F7;
        }
        input[type=range]:focus::-ms-fill-upper {
            background: #33C7F7;
        }
    .memo{
        width: 100%;
        font-size: 15px;
        margin-bottom: 20px;
    }
    .memo > i{
        margin-left: 10px;
        margin-right: 10px;
    }
    #text_write{
        box-sizing: border-box;
        width: 100%;
        height: 184px;
        background: #FFFFFF;
        border: 1px solid #000000;
        border-radius: 6px;
    }
    #btn_okay {
        background-color: #BDBDBD;
        border: none;
        color: white;
        border-radius: 5px;
        width: 100%;
        height: 60px;
        font-size: 12pt;
        margin-top: 50px;
        box-sizing: border-box;
    }
    #btn_okay.oxn{
        background-color: #33C7F7;
    }
</style>
</head>

<body>
<div class="review_top_box">
    <div class="review_top">
        <button id="back" onclick="history.back()"><i class="fas fa-chevron-left fa-2x"></i></button>
        <b id="title">리뷰 작성하기</b>
    </div>
</div>

<div class="review_bar">
    <label><b>양</b></label><input id="amount" type="range" min="1" max="5" step="1" value="1">
</div>
<div class="review_bar">
    <label><b>친절도</b></label><input id="kindness"type="range" min="1" max="5" step="1" value="1">
</div>
<div class="review_bar">
    <label><b>위생</b></label><input id="hygiene"type="range" min="1" max="5" step="1" value="1">
</div>
<div class="review_bar">

    <label><b>가격</b></label><input id="price" type="range" min="1" max="5" step="1" value="1">
</div>

<div class="star">
    <p><b>별점</b></p>
</div>

<div class="memo">
    <i class="fas fa-pen"></i>
    <b>리뷰 내용 작성하기</b>
</div>

<input id="text_write" type="text" min="0" max="500">

<div class="okay">
    <button id="btn_okay" type="button" onclick="okay()" disabled><b>완 료</b></button>
</div>

<script>
    $('#btn_okay').click(function () {
        let amount = $('#amount').val();
        let kindness = $('#kindness').val();
        let hygiene = $('#hygiene').val();
        let price = $('#price').val();
        let text = $('#text_write').val();
        $.ajax({
            url: "{% url 'review:create_api' %}",
            dataType: "json",
            data: {
                'csrfmiddlewaretoken': "{{ csrf_token }}",
                amount: amount,
                kindness: kindness,
                hygiene: hygiene,
                price: price,
                text: text,
                store_id: {{ pk }},
                user_id: {{ user.id }}
            },
            method: "POST",
            success: function (response, data) {
                location.replace("{% url 'store:detail' pk=pk %}");
            },
            error: function (request, status, error) {
                alert("실패");
                console.log(error);
            },
            complete: function () {
                console.log("성공");
            }
        })
    });
</script>

</body>
</html>